<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ƒê√°nh Gi√° D·ªãch V·ª• - Nh√† h√†ng ·∫®m th·ª±c Bu√¥n M√™ (Phi√™n b·∫£n iOS Wood/Earthy)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <style>
        /* ------------------ BI·∫æN M√ÄU S·∫ÆC CH·ª¶ ƒê·∫†O (WOOD/EARTHY THEME - iOS 5 SAO) ------------------ */
        :root {
            /* T√¥ng m√†u G·ªó/ƒê·∫•t m·ªõi - S√¢u v√† Sang tr·ªçng */
            --wood-dark: #3b2a22; /* M√†u n√¢u s√¥ c√¥ la ƒë·∫≠m - Text ch√≠nh */
            --wood: #5a3f33; /* M√†u n√¢u g·ªó ƒë·∫≠m - Primary Accent */
            --wood-light: #8b5e45; /* M√†u n√¢u g·ªó s√°ng - Accent/Highlight */
            --cream: #f4e6d4; /* N·ªÅn kem/Linen m·ªÅm m·∫°i - Background ch√≠nh */
            --highlight: #ffd99e; /* V√†ng ·∫•m/V√†ng ƒë·ªìng - Active Star */
            
            --ios-primary: var(--wood); 
            --ios-background: var(--cream);
            --ios-light-gray: #d9c7b4; /* M√†u x√°m nh·∫°t cho input/separator - ·∫•m h∆°n */
            --ios-dark-gray: var(--wood-dark); /* M√†u ch·ªØ ch√≠nh */
            --ios-text-secondary: #7e6e61; /* M√†u ch·ªØ ph·ª• (N√¢u x√°m nh·∫°t) */
            --ios-card-bg: #FFFFFF;
            
            /* M√†u ng√¥i sao m·ªõi - V√†ng ·∫•m cho 5 sao */
            --star-color-active: var(--highlight); /* V√†ng ·∫•m/V√†ng ƒë·ªìng */
            --star-color-inactive: var(--ios-light-gray); /* N·ªÅn x√°m nh·∫°t */
            
            /* ƒê·ªãnh nghƒ©a ƒë·ªï b√≥ng m·ªÅm ki·ªÉu iOS - D√πng m√†u n√¢u */
            --ios-shadow-soft: 0 10px 30px rgba(0,0,0,0.1); /* B√≥ng d√†y h∆°n, n·ªïi h∆°n */
            --ios-shadow-button: 0 8px 25px rgba(90, 63, 51, 0.4); /* Shadow t·ª´ m√†u n√¢u ch√≠nh */
            
            /* Bo g√≥c m·ªÅm m·∫°i ki·ªÉu iOS */
            --radius-main-container: 24px; /* Bo g√≥c l·ªõn cho Main Content */
            --radius-card: 26px;
            --radius-input: 18px;
            --radius-button-full: 48px; /* Bo g√≥c full cho floating button */
            --radius-toast: 18px;
            
            /* iOS Easing Function */
            --ios-ease: cubic-bezier(.22,.98,.45,1);
            --ios-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* ------------------ C√ÅC PH√âP CHUY·ªÇN ƒê·ªòNG (ANIMATION) ------------------ */

        /* Hi·ªáu ·ª©ng iOS spring bounce cho card */
        @keyframes cardBounceIn {
            0% { opacity: 0; transform: translateY(40px) scale(0.95); }
            60% { opacity: 1; transform: translateY(-5px) scale(1.005); }
            100% { transform: translateY(0) scale(1); }
        }
        
        /* HI·ªÜU ·ª®NG STAR NH·∫§P NH√î M·∫†NH */
        @keyframes starPulse {
            0% { transform: scale(1); opacity: 0.8; }
            40% { transform: scale(1.35); opacity: 1; filter: drop-shadow(0 0 10px var(--star-color-active)); } /* TƒÉng scale l√™n 1.35 */
            70% { transform: scale(1.15); opacity: 1; }
            100% { transform: scale(1.2); opacity: 1; } /* Gi·ªØ ·ªü 1.2 thay v√¨ 1.1 */
        }

        /* Pop-up N·∫£y v√†o gi·ªØa m√†n h√¨nh - HI·ªÜU ·ª®NG TR∆Ø·ª¢T RA GI·ªÆA */
        @keyframes toastPopInCenter {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.85); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* M·ªù d·∫ßn v√† thu nh·ªè ƒë·ªÉ ·∫©n */
        @keyframes toastFadeOutCenter {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.85); }
        }
        
        /* --- HI·ªÜU ·ª®NG V·∫º V√íNG TR√íN (DRAWING EFFECT) --- */
        @keyframes drawCircle {
            0% { border-width: 0px; border-color: transparent; transform: scale(0.8); }
            50% { border-width: 3px; border-color: var(--wood-light); transform: scale(1.1); }
            100% { border-width: 3px; border-color: var(--wood-light); transform: scale(1); }
        }

        /* --- HI·ªÜU ·ª®NG V·∫º D·∫§U T√çCH (STROKE EFFECT b·∫±ng clip-path) --- */
        @keyframes drawCheckmark {
            0% { 
                clip-path: inset(100% 100% 0% 0%); /* ·∫®n ho√†n to√†n t·ª´ tr√™n tr√°i */
                opacity: 0.5; /* H∆°i m·ªù l√∫c b·∫Øt ƒë·∫ßu */
            }
            1% { opacity: 1; }
            100% { 
                clip-path: inset(0% 0% 0% 0%); /* Hi·ªán to√†n b·ªô */
                opacity: 1; 
            }
        }


        /* -------------------------- CSS CH√çNH -------------------------- */

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Roboto, sans-serif, 'Inter', Arial, sans-serif;
            background-color: var(--ios-background);
            margin: 0;
            padding: 0;
            color: var(--ios-dark-gray);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
        }
        
        /* Container Ch√≠nh - Canh gi·ªØa v√† gi·ªõi h·∫°n k√≠ch th∆∞·ªõc */
        .main-container {
            max-width: 580px; /* Max-width tr√™n desktop */
            margin: 0 auto;
            padding: 0 20px 120px;
        }

        /* iOS Header Style */
        .app-header {
            padding: 40px 0 30px;
            text-align: center; /* CƒÉn gi·ªØa */
        }
        
        /* Logo Qu√°n - K√≠ch th∆∞·ªõc l·ªõn, Bo g√≥c, ƒê·ªï b√≥ng nh·∫π */
        .logo-container {
            margin-bottom: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s var(--ios-ease), box-shadow 0.3s var(--ios-ease);
        }

        .logo-container:hover {
             transform: translateY(-4px); /* Hi·ªáu ·ª©ng hover n√¢ng nh·∫π */
             box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        #restaurantLogo {
            width: 180px; /* K√≠ch th∆∞·ªõc logo l·ªõn */
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 16px; /* Bo g√≥c nh·∫π */
            background: linear-gradient(135deg, var(--wood-light), var(--wood)); /* Gradient nh·∫π */
            box-shadow: 0 8px 20px rgba(0,0,0,0.15); /* B√≥ng nh·∫π */
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        #restaurantLogo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 16px;
        }
        
        /* Icon d·ª± ph√≤ng */
        #restaurantLogo i {
             font-size: 70px !important;
        }

        .app-header h1 {
            font-size: 2.2em; 
            font-weight: 900; 
            margin: 0;
            letter-spacing: 0.5px; /* Kho·∫£ng c√°ch ch·ªØ tho√°ng */
            color: var(--ios-dark-gray);
            line-height: 1.2;
        }
        .app-header p {
            font-size: 1em;
            color: var(--ios-text-secondary);
            margin-top: 10px;
            font-weight: 500;
            max-width: 420px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Employee List - Grid Layout */
        .employee-list {
            display: grid;
            grid-template-columns: 1fr; /* Lu√¥n 1 c·ªôt tr√™n mobile */
            gap: 20px; 
            margin: 0 auto;
        }
        
        /* Employee Card - Tinh t·∫ø v√† bo g√≥c */
        .employee-card {
            background-color: var(--ios-card-bg);
            border-radius: var(--radius-main-container); /* Bo g√≥c l·ªõn */
            box-shadow: var(--ios-shadow-soft); 
            padding: 20px 20px 30px 20px; /* Gi·∫£m padding ngang ƒë·ªÉ ·∫£nh to ra */
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            animation: cardBounceIn 0.6s var(--ios-spring) forwards;
            min-height: 280px; 
            transition: transform 0.3s var(--ios-ease), box-shadow 0.3s var(--ios-ease);
            cursor: default; 
        }
        
        .employee-card:hover {
            transform: translateY(-5px); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        /* Animation delays */
        .employee-card:nth-child(1) { animation-delay: 0.1s; }
        .employee-card:nth-child(2) { animation-delay: 0.2s; }
        .employee-card:nth-child(3) { animation-delay: 0.3s; }
        .employee-card:nth-child(4) { animation-delay: 0.4s; }

        /* KHUNG ·∫¢NH NH√ÇN VI√äN M·ªöI - L·ªöN H∆†N */
        .employee-card img {
            width: 100%; /* Chi·∫øm to√†n b·ªô chi·ªÅu r·ªông th·∫ª (tr·ª´ padding) */
            max-width: 100%;
            height: 250px; /* Chi·ªÅu cao c·ªë ƒë·ªãnh l·ªõn h∆°n */
            border-radius: 20px; /* Vu√¥ng bo tr√≤n */
            object-fit: cover;
            margin-bottom: 20px;
            margin-top: 10px; /* ƒê·∫©y xu·ªëng m·ªôt ch√∫t */
            /* B·ªè vi·ªÅn ngo√†i ƒë·ªÉ ·∫£nh n·ªïi b·∫≠t h∆°n */
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
        }

        .employee-card h3 {
            margin: 0;
            font-size: 1.5em; /* K√≠ch th∆∞·ªõc t√™n l·ªõn h∆°n */
            font-weight: 600; /* Semi-bold */
        }

        .employee-card p {
            font-size: 1em;
            color: var(--ios-text-secondary);
            margin: 5px 0 25px 0;
            font-weight: 500;
        }

        /* Rating Icons - H·ªÜ TH·ªêNG STAR RATING */
        .rating-stars {
            display: flex;
            justify-content: center;
            width: 100%;
            gap: 12px; /* TƒÉng kho·∫£ng c√°ch */
        }

        .rating-star {
            font-size: 32px; /* Icon sao l·ªõn 32px */
            cursor: pointer;
            color: var(--star-color-inactive); 
            transition: color 0.2s var(--ios-ease), transform 0.25s var(--ios-ease), filter 0.25s var(--ios-ease);
            min-height: 44px; /* V√πng ch·∫°m t·ªëi thi·ªÉu */
            display: flex;
            align-items: center;
        }
        
        /* Hi·ªáu ·ª©ng nh·∫•n sao - Scale nh·∫π */
        .rating-star:active {
            transform: scale(0.9);
        }
        
        /* M√†u sao ƒë√£ ch·ªçn */
        .rating-star.active { 
            color: var(--star-color-active);
        }
        
        /* D√πng Animation cho s·ª± l·ª±a ch·ªçn */
        .rating-star.last-selected { 
            animation: starPulse 0.4s var(--ios-ease) forwards;
            /* Th√™m gradient/shadow nh·∫π khi ch·ªçn */
            filter: drop-shadow(0 0 4px var(--star-color-active));
        }
        
        /* ·∫®n c√°c icon c≈© kh√¥ng d√πng */
        .rating-icons { display: none; }


        /* Fixed Feedback Button - iOS Floating Button */
        .feedback-button-fixed {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 36px; 
            /* N·ªÅn gradient kem -> tr·∫Øng */
            background: linear-gradient(180deg, var(--ios-card-bg) 0%, var(--cream) 100%);
            color: var(--wood-dark);
            border: none;
            border-radius: var(--radius-button-full);
            font-size: 1.1em;
            font-weight: 700; 
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1), 0 0 0 1px var(--ios-light-gray); /* B√≥ng m·ªÅm + vi·ªÅn nh·∫π */
            z-index: 1000;
            transition: transform 0.2s var(--ios-ease), box-shadow 0.2s var(--ios-ease);
            display: flex;
            align-items: center;
            gap: 12px; 
            min-height: 55px; /* TƒÉng chi·ªÅu cao ƒë·ªÉ d·ªÖ ch·∫°m */
            letter-spacing: 0.2px;
        }
        
        /* Hi·ªáu ·ª©ng b·∫•m tr·ªìi nh·∫π - iOS effect */
        .feedback-button-fixed:active {
            transform: translateX(-50%) translateY(2px); 
            box-shadow: 5px 15px rgba(0,0,0,0.1); /* Gi·∫£m shadow 20% */
        }

        /* -------------------------- TOAST NOTIFICATION STYLE (ƒê√É CH·ªàNH S·ª¨A) -------------------------- */
        #toastNotification {
            position: fixed;
            top: 50%; /* Canh gi·ªØa m√†n h√¨nh */
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9); /* Tr·∫°ng th√°i ·∫©n/b·∫Øt ƒë·∫ßu */
            z-index: 2000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 18px 30px; /* Padding l·ªõn h∆°n cho n·ªïi b·∫≠t */
            border-radius: var(--radius-toast);
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.2); /* Shadow ƒë·∫≠m h∆°n */
            color: var(--ios-dark-gray);
            font-weight: 600; 
            font-size: 1.1em; /* Font l·ªõn h∆°n */
            display: flex;
            flex-direction: column; /* S·∫Øp x·∫øp icon v√† text theo chi·ªÅu d·ªçc */
            align-items: center;
            gap: 10px;
            opacity: 0;
            transition: none;
            max-width: 90%;
            text-align: center;
        }

        #toastNotification.show {
            animation: toastPopInCenter 0.4s var(--ios-spring) forwards; /* D√πng hi·ªáu ·ª©ng gi·ªØa m√†n h√¨nh */
        }

        #toastNotification.hide {
            animation: toastFadeOutCenter 0.3s ease-out forwards; /* D√πng hi·ªáu ·ª©ng ·∫©n gi·ªØa m√†n h√¨nh */
        }
        
        /* Container c·ªßa icon v√† v√≤ng tr√≤n (Ph·∫ßn ƒë√£ th√™m) */
        .success-icon-container {
            width: 60px; /* K√≠ch th∆∞·ªõc v√πng v·∫Ω */
            height: 60px;
            border-radius: 50%;
            border: 3px solid transparent; /* Border m·∫∑c ƒë·ªãnh trong su·ªët */
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 5px; /* Kho·∫£ng c√°ch v·ªõi text */
            background: rgba(139, 94, 69, 0.05); 
            transition: border-color 0.2s;
        }

        /* Icon d·∫•u t√≠ch */
        .success-check-icon {
            font-size: 2.2em; /* K√≠ch th∆∞·ªõc d·∫•u t√≠ch */
            color: var(--wood-light);
            /* Tr·∫°ng th√°i ban ƒë·∫ßu: ·∫®n v√† s·∫µn s√†ng cho animation v·∫Ω */
            opacity: 0; 
            transform: scale(1.1);
            clip-path: inset(100% 100% 0% 0%); /* ·∫®n ho√†n to√†n d·∫•u t√≠ch ban ƒë·∫ßu */
        }

        /* √Åp d·ª•ng animation cho icon container (V·∫Ω V√≤ng Tr√≤n) */
        #toastNotification.show .success-icon-container {
            /* 0.4s duration, start at 0.2s delay */
            animation: drawCircle 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.2s forwards; 
        }

        /* √Åp d·ª•ng animation cho d·∫•u t√≠ch (V·∫Ω D·∫•u T√≠ch) */
        #toastNotification.show .success-check-icon {
            /* 0.6s duration, start at 0.6s delay (sau khi v√≤ng tr√≤n ƒë√£ v·∫Ω xong) */
            animation: drawCheckmark 0.6s ease-out 0.6s forwards; 
        }

        /* -------------------------- MODAL STYLE (ƒê√£ s·ª≠a l·ªói hi·ªÉn th·ªã) -------------------------- */
        .feedback-modal {
            position: fixed;
            z-index: 1001; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.25); /* N·ªÅn t·ªëi h∆°n ƒë·ªÉ n·ªïi b·∫≠t */
            backdrop-filter: blur(12px); 
            -webkit-backdrop-filter: blur(12px);
            opacity: 0;
            transition: opacity 0.3s ease-out;
            pointer-events: none; /* R·∫•t quan tr·ªçng: M·∫∑c ƒë·ªãnh kh√¥ng t∆∞∆°ng t√°c */
        }
        
        /* Khi Modal hi·ªán l√™n (c√≥ class show) */
        .feedback-modal.show {
            opacity: 1;
            pointer-events: auto; /* Cho ph√©p t∆∞∆°ng t√°c */
        }

        .modal-content {
            background-color: var(--ios-card-bg);
            margin: 15vh auto; 
            padding: 30px;
            border-radius: var(--radius-card);
            width: 90%;
            max-width: 480px; 
            box-shadow: var(--ios-shadow-soft);
            position: relative;
            
            /* D√πng gi√° tr·ªã m·∫∑c ƒë·ªãnh cho tr·∫°ng th√°i ·∫©n */
            opacity: 0; 
            transform: translateY(50px) scale(0.95);
            transition: transform 0.4s var(--ios-spring), opacity 0.3s ease-out;
        }

        .feedback-modal.show .modal-content {
            opacity: 1;
            transform: translateY(0) scale(1); /* Hi·ªáu ·ª©ng m·ªü m∆∞·ª£t m√† */
        }

        .modal-content h2 {
            font-size: 1.8em; 
            font-weight: 800;
            margin: 0 0 8px 0;
            color: var(--ios-dark-gray);
        }
        .modal-content p {
            color: var(--ios-text-secondary);
            font-size: 1em;
            margin-bottom: 25px;
        }

        /* Input & Textarea - Style Settings iOS */
        .modal-content textarea {
            width: 100%;
            height: 150px; 
            padding: 20px; /* Padding l·ªõn h∆°n */
            margin: 10px 0 25px 0;
            box-sizing: border-box;
            border: 1px solid transparent;
            border-radius: var(--radius-input);
            resize: vertical;
            font-size: 1em;
            font-family: inherit;
            background-color: var(--ios-light-gray); /* N·ªÅn m√†u g·ªó nh·∫°t */
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            outline: none;
            color: var(--ios-dark-gray);
        }

        .modal-content textarea:focus {
            /* Border highlight m·ªÅm m·∫°i */
            border-color: var(--wood-light); 
            box-shadow: 0 0 0 1px var(--wood-light), 0 0 12px rgba(139, 94, 69, 0.15); 
            background-color: var(--ios-card-bg);
        }
        
        /* Modal Submit Button - Bo g√≥c m·ªÅm m·∫°i */
        .modal-content button {
            width: 100%;
            background-color: var(--wood);
            color: white;
            padding: 16px;
            border: none;
            border-radius: var(--radius-input); /* Bo g√≥c m·ªÅm h∆°n */
            cursor: pointer;
            font-size: 1.15em;
            font-weight: 700;
            transition: transform 0.2s var(--ios-ease), background-color 0.2s;
            min-height: 50px; /* V√πng ch·∫°m t·ªëi thi·ªÉu */
        }

        .modal-content button:active {
            transform: scale(0.98); /* Hi·ªáu ·ª©ng b·∫•m nh·∫π */
            background-color: var(--wood-dark); 
        }

        .close-button {
            color: var(--ios-text-secondary);
            font-size: 32px;
            font-weight: 200;
            cursor: pointer;
            position: absolute;
            top: 15px;
            right: 20px;
            transition: color 0.2s;
            line-height: 1;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--ios-dark-gray);
        }

        /* -------------------------- MEDIA QUERIES (Mobile & Desktop Grid) -------------------------- */

        @media (min-width: 580px) {
            .employee-list {
                grid-template-columns: repeat(2, 1fr); /* 2 c·ªôt tr√™n desktop */
            }
        }
        
        @media (min-width: 900px) {
            .employee-card {
                padding: 30px 20px 30px 20px; /* Gi·ªØ padding tr√™n desktop l·ªõn */
            }
            .employee-card img {
                height: 200px; /* C√≥ th·ªÉ gi·∫£m chi·ªÅu cao ·∫£nh tr√™n desktop 4 c·ªôt ƒë·ªÉ t·ªëi ∆∞u */
            }
            .employee-list {
                grid-template-columns: repeat(4, 1fr); /* 4 c·ªôt tr√™n desktop l·ªõn */
            }
        }
        
        @media (max-width: 580px) {
            .app-header {
                padding: 30px 0 20px;
            }
            .app-header h1 {
                font-size: 2em;
            }
            #restaurantLogo {
                width: 150px; 
                height: 150px;
            }
            .employee-list {
                 gap: 15px;
            }
            .employee-card img {
                height: 200px; /* Gi·ªØ k√≠ch th∆∞·ªõc l·ªõn h∆°n cho mobile 1 c·ªôt */
            }
            .rating-star {
                font-size: 28px; /* C·∫≠p nh·∫≠t k√≠ch th∆∞·ªõc sao cho mobile */
                gap: 8px;
            }
            .feedback-button-fixed {
                bottom: 20px;
                padding: 14px 30px;
                font-size: 1em;
            }
            /* #toastNotification {
                bottom: 20px;
            } */
            .modal-content {
                margin: 15vh 20px; /* ƒê·∫£m b·∫£o padding quanh modal */
                width: auto;
            }
        }
    </style>
</head>
<body>

    <div class="main-container">
        <header class="app-header">
            <div class="logo-container">
                <div id="restaurantLogo">
                    <img src="logobanme.png" 
                         alt="Logo Nh√† h√†ng ·∫®m th·ª±c Bu√¥n M√™" 
                         onerror="this.onerror=null; this.outerHTML='<i class=\'fas fa-utensils\' style=\'font-size: 70px; color: #f4e6d4;\'></i>';" 
                    >
                </div>
                <h1>Nh√† h√†ng ·∫®m th·ª±c Bu√¥n M√™</h1>
            </div>
            <p>Vui l√≤ng ƒë√°nh gi√° tr·∫£i nghi·ªám c·ªßa b·∫°n v·ªõi t·ª´ng nh√¢n vi√™n. S·ª± h√†i l√≤ng c·ªßa qu√Ω kh√°ch l√† ƒë·ªông l·ª±c c·ªßa ch√∫ng t√¥i.</p>
        </header>

        <div class="employee-list" id="employeeList">
            
            <div class="employee-card" data-employee-id="NV001">
                <img src="nv1.webp" alt="Nguy·ªÖn Th·ªã A" onerror="this.onerror=null; this.src='https://placehold.co/100x100/E0D9D4/3E2723?text=A';">
                <h3>Nguy·ªÖn Th·ªã A</h3>
                <p>Ph·ª•c v·ª• B√†n</p>
                <div class="rating-stars" data-employee-id="NV001">
                    <i class="fas fa-star rating-star" title="1/5: R·∫•t T·ªá" data-rating="1" onclick="rateEmployee('NV001', 1, 'R·∫•t T·ªá', this)"></i>
                    <i class="fas fa-star rating-star" title="2/5: Kh√¥ng H√†i L√≤ng" data-rating="2" onclick="rateEmployee('NV001', 2, 'Kh√¥ng H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="3/5: B√¨nh Th∆∞·ªùng" data-rating="3" onclick="rateEmployee('NV001', 3, 'B√¨nh Th∆∞·ªùng', this)"></i>
                    <i class="fas fa-star rating-star" title="4/5: H√†i L√≤ng" data-rating="4" onclick="rateEmployee('NV001', 4, 'H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="5/5: Tuy·ªát V·ªùi" data-rating="5" onclick="rateEmployee('NV001', 5, 'Tuy·ªát V·ªùi', this)"></i>
                </div>
            </div>
            
            <div class="employee-card" data-employee-id="NV002">
                <img src="https://images.unsplash.com/photo-1541460395786-c320875e528b?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDR8fHxlbnwwfHx8fHw%3D" alt="Tr·∫ßn VƒÉn B" onerror="this.onerror=null; this.src='https://placehold.co/100x100/E0D9D4/3E2723?text=B';">
                <h3>Tr·∫ßn VƒÉn B</h3>
                <p>Pha Ch·∫ø</p>
                <div class="rating-stars" data-employee-id="NV002">
                    <i class="fas fa-star rating-star" title="1/5: R·∫•t T·ªá" data-rating="1" onclick="rateEmployee('NV002', 1, 'R·∫•t T·ªá', this)"></i>
                    <i class="fas fa-star rating-star" title="2/5: Kh√¥ng H√†i L√≤ng" data-rating="2" onclick="rateEmployee('NV002', 2, 'Kh√¥ng H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="3/5: B√¨nh Th∆∞·ªùng" data-rating="3" onclick="rateEmployee('NV002', 3, 'B√¨nh Th∆∞·ªùng', this)"></i>
                    <i class="fas fa-star rating-star" title="4/5: H√†i L√≤ng" data-rating="4" onclick="rateEmployee('NV002', 4, 'H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="5/5: Tuy·ªát V·ªùi" data-rating="5" onclick="rateEmployee('NV002', 5, 'Tuy·ªát V·ªùi', this)"></i>
                </div>
            </div>

            <div class="employee-card" data-employee-id="NV003">
                <img src="https://images.unsplash.com/photo-1627909384594-55581c1f53f3?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDh8fHxlbnwwfHx8fHw%3D" alt="L√™ Th·ªã C" onerror="this.onerror=null; this.src='https://placehold.co/100x100/E0D9D4/3E2723?text=C';">
                <h3>L√™ Th·ªã C</h3>
                <p>Thu Ng√¢n</p>
                <div class="rating-stars" data-employee-id="NV003">
                    <i class="fas fa-star rating-star" title="1/5: R·∫•t T·ªá" data-rating="1" onclick="rateEmployee('NV003', 1, 'R·∫•t T·ªá', this)"></i>
                    <i class="fas fa-star rating-star" title="2/5: Kh√¥ng H√†i L√≤ng" data-rating="2" onclick="rateEmployee('NV003', 2, 'Kh√¥ng H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="3/5: B√¨nh Th∆∞·ªùng" data-rating="3" onclick="rateEmployee('NV003', 3, 'B√¨nh Th∆∞·ªùng', this)"></i>
                    <i class="fas fa-star rating-star" title="4/5: H√†i L√≤ng" data-rating="4" onclick="rateEmployee('NV003', 4, 'H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="5/5: Tuy·ªát V·ªùi" data-rating="5" onclick="rateEmployee('NV003', 5, 'Tuy·ªát V·ªùi', this)"></i>
                </div>
            </div>
            
            <div class="employee-card" data-employee-id="NV004">
                <img src="https://images.unsplash.com/photo-1600572836261-2f7b8e11a2f9?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDF8fHxlbnwwfHx8fHw%3D" alt="Ph·∫°m VƒÉn D" onerror="this.onerror=null; this.src='https://placehold.co/100x100/E0D9D4/3E2723?text=D';">
                <h3>Ph·∫°m VƒÉn D</h3>
                <p>Qu·∫£n L√Ω</p>
                <div class="rating-stars" data-employee-id="NV004">
                    <i class="fas fa-star rating-star" title="1/5: R·∫•t T·ªá" data-rating="1" onclick="rateEmployee('NV004', 1, 'R·∫•t T·ªá', this)"></i>
                    <i class="fas fa-star rating-star" title="2/5: Kh√¥ng H√†i L√≤ng" data-rating="2" onclick="rateEmployee('NV004', 2, 'Kh√¥ng H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="3/5: B√¨nh Th∆∞·ªùng" data-rating="3" onclick="rateEmployee('NV004', 3, 'B√¨nh Th∆∞·ªùng', this)"></i>
                    <i class="fas fa-star rating-star" title="4/5: H√†i L√≤ng" data-rating="4" onclick="rateEmployee('NV004', 4, 'H√†i L√≤ng', this)"></i>
                    <i class="fas fa-star rating-star" title="5/5: Tuy·ªát V·ªùi" data-rating="5" onclick="rateEmployee('NV004', 5, 'Tuy·ªát V·ªùi', this)"></i>
                </div>
            </div>
        </div>
    </div>

    <button class="feedback-button-fixed" onclick="openFeedbackModal()">
        <i class="fas fa-lightbulb"></i> G√≥p √ù X√¢y D·ª±ng & Ph√°t Tri·ªÉn
    </button>

    <div id="feedbackModal" class="feedback-modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeFeedbackModal()">&times;</span>
            <h2>G√≥p √ù X√¢y D·ª±ng üí°</h2>
            <p>Ch√∫ng t√¥i lu√¥n l·∫Øng nghe. T·∫•t c·∫£ √Ω ki·∫øn c·ªßa b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn ƒë·ªôi ng≈© qu·∫£n l√Ω cao c·∫•p.</p>
            <textarea id="feedbackText" placeholder="Nh·∫≠p g√≥p √Ω v·ªÅ d·ªãch v·ª•, m√≥n ƒÉn, kh√¥ng gian, ho·∫∑c b·∫•t c·ª© ƒëi·ªÅu g√¨ b·∫°n mu·ªën chia s·∫ª..."></textarea>
            <button onclick="submitFeedback()">G·ª≠i G√≥p √ù</button>
        </div>
    </div>
    
    <div id="toastNotification">
        <div class="success-icon-container"> 
            <i class="fas fa-check success-check-icon"></i> 
        </div>
        <span id="toastMessage"></span>
    </div>

    <script type="module">
        // --- FIREBASE IMPORTS ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";


        // --- FIREBASE CONFIG (L·∫•y t·ª´ th√¥ng tin ng∆∞·ªùi d√πng) ---
        const firebaseConfig = {
            apiKey: "AIzaSyC4k2DyiEVKXcMpc_j9XwqZG1OHHBNegDk",
            authDomain: "lichnghi-4c665.firebaseapp.com",
            databaseURL: "https://lichnghi-4c665-default-rtdb.firebaseio.com",
            projectId: "lichnghi-4c665",
            storageBucket: "lichnghi-4c665.firebasestorage.app",
            messagingSenderId: "86673813509",
            appId: "1:86673813509:web:168376408dfcbf14e16c6c",
            measurementId: "G-2G08MRQY1V"
        };
        
        // --- KH·ªûI T·∫†O D·ªäCH V·ª§ ---
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const auth = getAuth(app);
        let userId = 'anonymous'; // ID m·∫∑c ƒë·ªãnh tr∆∞·ªõc khi x√°c th·ª±c

        // ƒêƒÉng nh·∫≠p ·∫©n danh ƒë·ªÉ c√≥ ID ng∆∞·ªùi d√πng (quan tr·ªçng cho vi·ªác l∆∞u tr·ªØ)
        signInAnonymously(auth).then((userCredential) => {
            userId = userCredential.user.uid;
            console.log("Ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p ·∫©n danh. User ID:", userId);
        }).catch((error) => {
            console.error("L·ªói ƒëƒÉng nh·∫≠p ·∫©n danh:", error);
            // V·∫´n ƒë·ªÉ userId l√† 'anonymous' n·∫øu l·ªói
        });

        // --- LOGIC L·∫§Y S·ªê B√ÄN T·ª™ URL ---

        let tableNumber = 'unknown'; // Bi·∫øn to√†n c·ª•c ƒë·ªÉ l∆∞u s·ªë b√†n

        // H√†m l·∫•y gi√° tr·ªã c·ªßa tham s·ªë 'table' t·ª´ URL
        function getTableNumberFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const table = urlParams.get('table');
            return table ? table.toUpperCase() : 'UNKNOWN'; // Chuy·ªÉn th√†nh ch·ªØ hoa/s·ªë, n·∫øu kh√¥ng c√≥ th√¨ l√† UNKNOWN
        }
        
        // G·ªçi h√†m ngay khi script kh·ªüi t·∫°o
        tableNumber = getTableNumberFromUrl();
        console.log("S·ªë b√†n (Table Number) t·ª´ URL:", tableNumber);

        // --- H√ÄM X·ª¨ L√ù CHUNG ---

        let employeeRatings = {};
        const toastNotification = document.getElementById('toastNotification');
        const toastMessage = document.getElementById('toastMessage');
        let toastTimeout;
        
        // H√†m m·ªõi ƒë·ªÉ l·∫•y th·ªùi gian hi·ªán t·∫°i theo m√∫i gi·ªù Vi·ªát Nam (GMT+7)
        function getVietnamTime() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: '2-digit', 
                day: '2-digit', 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit', 
                hour12: false,
                timeZone: 'Asia/Ho_Chi_Minh' 
            };
            return new Intl.DateTimeFormat('vi-VN', options).format(now);
        }

        // C·∫¨P NH·∫¨T LOGIC SHOW TOAST CHO HI·ªÜU ·ª®NG GI·ªÆA M√ÄN H√åNH
        function showToast(message) {
            clearTimeout(toastTimeout); 
            
            // X√≥a h·∫øt class animation c≈©
            toastNotification.classList.remove('show');
            toastNotification.classList.remove('hide');

            toastMessage.textContent = message;
            
            setTimeout(() => {
                // Th√™m class 'show' ƒë·ªÉ k√≠ch ho·∫°t animation PopInCenter, drawCircle v√† drawCheckmark
                toastNotification.classList.add('show'); 
            }, 10);
            
            toastTimeout = setTimeout(() => {
                // Th√™m class 'hide' ƒë·ªÉ k√≠ch ho·∫°t animation FadeOutCenter
                toastNotification.classList.remove('show');
                toastNotification.classList.add('hide'); 
                setTimeout(() => {
                    // X√≥a class 'hide' sau khi animation ho√†n t·∫•t ƒë·ªÉ s·∫µn s√†ng cho l·∫ßn sau
                    toastNotification.classList.remove('hide');
                }, 400); // 400ms > 300ms c·ªßa animation toastFadeOutCenter
            }, 3000);
        }

        // --- H√ÄM ƒê√ÅNH GI√Å NH√ÇN VI√äN V√Ä L∆ØU V√ÄO DB (G√°n v√†o window) ---
        window.rateEmployee = async function(employeeId, rating, mood, selectedIconElement) {
            console.log(`Rating: Employee ${employeeId} - ${rating} Sao (${mood})`);
            employeeRatings[employeeId] = rating;

            // UI LOGIC
            const ratingStarsContainer = selectedIconElement.closest('.rating-stars');
            const allStars = ratingStarsContainer.querySelectorAll('.rating-star');
            
            allStars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                star.classList.remove('last-selected');
                
                if (starRating <= rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
            
            selectedIconElement.classList.add('last-selected');

            // FIREBASE LOGIC
            try {
                const employeeCard = selectedIconElement.closest('.employee-card');
                const data = {
                    employeeId: employeeId,
                    employeeName: employeeCard.querySelector('h3').textContent,
                    employeeRole: employeeCard.querySelector('p').textContent,
                    rating: rating,
                    mood: mood,
                    timestamp: Date.now(), 
                    vnTime: getVietnamTime(), 
                    userId: userId,
                    tableNumber: tableNumber
                };
                
                // Ghi v√†o Realtime DB, s·ª≠ d·ª•ng push() ƒë·ªÉ t·∫°o kh√≥a duy nh·∫•t
                const ratingsRef = ref(db, `ratings`);
                await push(ratingsRef, data); 

                showToast(`C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√°, ch√∫ng m√¨nh xin ph√©p ƒë∆∞·ª£c ghi nh·∫≠n ·∫°`);
                console.log(`ƒê√°nh gi√° ${employeeId} ƒë√£ l∆∞u th√†nh c√¥ng v√†o Realtime DB. B√†n: ${tableNumber}`);

            } catch (error) {
                console.error("L·ªói khi l∆∞u ƒë√°nh gi√° v√†o Firebase:", error);
                showToast("L·ªói! Kh√¥ng th·ªÉ l∆∞u ƒë√°nh gi√°. Vui l√≤ng th·ª≠ l·∫°i.");
            }
        }

        // --- H√ÄM X·ª¨ L√ù MODAL (G√°n v√†o window) ---

        const feedbackModal = document.getElementById('feedbackModal');
        const feedbackTextarea = document.getElementById('feedbackText');
        
        window.openFeedbackModal = function() {
            document.body.style.overflow = 'hidden'; 
            
            feedbackModal.classList.remove('show'); 
            
            setTimeout(() => {
                feedbackModal.classList.add('show');
            }, 10);
            
            setTimeout(() => feedbackTextarea.focus(), 350); 
        }

        window.closeFeedbackModal = function() {
            feedbackModal.classList.remove('show');
            document.body.style.overflow = '';
            
            setTimeout(() => {
                if (!feedbackModal.classList.contains('show')) {
                    // ƒê·∫£m b·∫£o kh√¥ng c√≥ l·ªói
                }
            }, 400); 
        }

        // --- H√ÄM G·ª¨I G√ìP √ù V√Ä L∆ØU V√ÄO DB (G√°n v√†o window) ---
        window.submitFeedback = async function() {
            const feedback = feedbackTextarea.value.trim();

            if (feedback === "") {
                showToast("Vui l√≤ng nh·∫≠p n·ªôi dung g√≥p √Ω tr∆∞·ªõc khi g·ª≠i!");
                return;
            }

            // FIREBASE LOGIC: L∆∞u g√≥p √Ω
            try {
                const data = {
                    feedback: feedback,
                    timestamp: Date.now(),
                    vnTime: getVietnamTime(),
                    userId: userId,
                    tableNumber: tableNumber 
                };
                
                // Ghi v√†o Realtime DB d∆∞·ªõi node /general_feedback
                const feedbackRef = ref(db, 'general_feedback');
                await push(feedbackRef, data); 

                console.log("N·ªôi dung g√≥p √Ω ƒë√£ ƒë∆∞·ª£c l∆∞u:", feedback);
                // G·ªåI HI·ªÜU ·ª®NG V·∫º V√íNG TR√íN + D·∫§U T√çCH T·∫†I ƒê√ÇY
                showToast(`G√≥p √Ω c·ªßa qu√Ω kh√°ch t·∫°i b√†n ${tableNumber} ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n. Xin ch√¢n th√†nh c·∫£m ∆°n!`);
                
                feedbackTextarea.value = '';
                closeFeedbackModal();

            } catch (error) {
                console.error("L·ªói khi l∆∞u g√≥p √Ω v√†o Firebase:", error);
                showToast("L·ªói! Kh√¥ng th·ªÉ g·ª≠i g√≥p √Ω. Vui l√≤ng th·ª≠ l·∫°i.");
            }
        }

        // ƒê√≥ng modal khi click ra ngo√†i khung n·ªôi dung
        window.onclick = function(event) {
            if (event.target == feedbackModal) {
                window.closeFeedbackModal();
            }
        }
    </script>
</body>
</html>
